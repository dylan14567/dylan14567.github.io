<!DOCTYPE html>
<html lang="es" dir="ltr">
  <head>
    <meta charset="utf-8">
    <script src="../brython/brython.js"></script>
    <script src="../brython/brython_stdlib.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=IBM+Plex+Sans&family=Permanent+Marker&display=swap" rel="stylesheet">
    <title>Calculadora</title>
    <link rel="shortcut icon" type="image/x-icon" href="unnamed-ConvertImage.ico">

  </head>
  <body onload=brython()>
    <style media="screen">
*{
    font-family: sans-serif;
    font-weight: normal;
    font-size: 1.1em;
    text-align: center;
    background-color: #e2e9f2;
}
td{
  background: #2d5373;
  color: #fff;
    padding: 10px 30px 10px 30px;
    border-radius: 0.2em;
    text-align: center;
    cursor: default;
    font-family: 'Bangers', Verdana, Tahoma, sans-serif;
}

td:hover {
    background: #d2ac8c;
    color: #505050;
    transition-duration: 400ms;
}

#unDiv {
  text-align: center;
}

#result{
  border: #ccc .3rem solid;
  color: #333;
  margin-top: 1px;
    padding: 10px 30px 10px 30px;
    text-align: right;
    font-family: 'IBM Plex Sans', serif;
  background-color: #7FFF00;
}

    </style>

    <div id="unDiv">
      <table id="tablita">

      </table>
    </div>

    <script type="text/python">
      from browser import document, html

      # Construcción de la calculadora
      calc = document['tablita']
      calc <= html.TR(html.TH(html.DIV("0", id="result"), colspan=3) +
                      html.TD("CE"))
      lines = ["789/", "456*", "123-", "0.=+"]

      calc <= (html.TR(html.TD(x) for x in line) for line in lines)

      document <= calc

      result = document["result"] # direccion el acceso a un elemento por su id

      def action(event):
          """Acciona el evento "click" en un boton de la calcu"""
          # El elemento al que el usuario le dio clic es el atributo 'target'
          # del objeto event
          element = event.target
          # El texto impreso en el botón es el atributo 'text' del elemento
          value = element.text
          if value not in "=CE":
              # actualiza la zona del resultado
              if result.text in ["0", "error"]:
                  result.text = value
              else:
                  result.text = result.text + value
          elif value == "CE":
              # resetea
              result.text = "0"
          elif value == "=":
              # ejecuta la formula en la zona del resultado
              try:
                  result.text = eval(result.text)
              except:
                  result.text = "error"

      # Asocia la funcion action() con el event "click" en todos los botones
      for button in document.select("td"):
          button.bind("click", action)
    </script>

  </body>
</html>
